import{b as x,a as L,u as P,j as s,N as j,c as D,d as E,r as c,s as _}from"./index-CSqFwPM3.js";import{B as h}from"./MixSpace-D0mpTH-n.js";import{T as u}from"./TextField-be9RhR2T.js";import{L as m}from"./Layout-CxlruPxc.js";const w=x.injectEndpoints({endpoints:a=>({login:a.mutation({query:({user:i,password:t})=>({url:"",method:"POST",params:{command:L.CHECK_LOGIN,json:JSON.stringify({user:i,password:t}),emelClass:"API3PL"}})})})}),k="_logo_nsuxo_1",U="_container_nsuxo_5",y="_form_nsuxo_15",T="_field_nsuxo_26",n={logo:k,container:U,form:y,field:T},{useLoginMutation:A}=w,d="/asn",O=()=>{const{token:a}=P(e=>e.authUser);if(a)return s.jsxDEV(j,{to:d},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/Login/Login.tsx",lineNumber:22,columnNumber:21},void 0);const i=D(),t=E(),[g,{data:o,isLoading:p}]=A(),[r,f]=c.useState(null),[l,b]=c.useState(null),N=!r||!l,v=async()=>{try{const{TockenId:e}=await g({user:r,password:l}).unwrap();e&&(i(_(e)),t(d))}catch(e){console.error("Failed to login:",e)}};return s.jsxDEV(m,{className:n.container,children:s.jsxDEV(m,{className:n.form,direction:"column",children:[s.jsxDEV(u,{className:n.field,label:"Логин",placeholder:"Логин",labelPosition:"top",value:r,onChange:e=>f(e)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/Login/Login.tsx",lineNumber:51,columnNumber:9},void 0),s.jsxDEV(u,{className:n.field,label:"Пароль",placeholder:"Пароль",labelPosition:"top",type:"password",value:l,status:o!=null&&o.Error?"alert":void 0,caption:(o==null?void 0:o.Error)||void 0,onChange:e=>b(e)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/Login/Login.tsx",lineNumber:59,columnNumber:9},void 0),s.jsxDEV(h,{label:"Войти",disabled:N,loading:p,onClick:v},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/Login/Login.tsx",lineNumber:70,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/Login/Login.tsx",lineNumber:50,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/Login/Login.tsx",lineNumber:49,columnNumber:5},void 0)};export{O as default};
