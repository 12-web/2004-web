import{r as l,j as r,b as ge,a as U,e as Me,f as He,m as q,n as $e,c as W,u as ce,o as De,p as Ge,q as Be,l as Pe,t as Ce,v as We}from"./index-CSqFwPM3.js";import{T as Z,L as T}from"./Layout-CxlruPxc.js";import{R as Je,I as Qe,D as Q,C as Ze,T as Ue,H as Y,S as Le,g as Ke,a as he,b as Xe,A as er}from"./Alert-BrohWNuD.js";import{B as rr,C as sr,D as ar,m as z,u as nr,I as Se,c as or,i as Ve,G,b as se,M as ve,s as P,a as ee,R as I,d as dr,e as tr,f as ir,U as lr,t as mr,g as cr,h as ur}from"./toBase64-DMcPn46T.js";import{f as B,r as je,B as br,d as ae,a as w,g as Oe,F as xe,m as O,b as F,u as Ae,w as gr,T as pr,D as re,I as me,e as Te}from"./useToast-DH1UudK5.js";import{B as L}from"./MixSpace-D0mpTH-n.js";import{T as Nr}from"./TextField-be9RhR2T.js";import{I as ye,L as fr}from"./LayoutContainer-BzmHpDds.js";import"./createResponsesImage-CHienvk_.js";const Dr=({status:e})=>{const s=l.useMemo(()=>{switch(!0){case e==="Редактируется":return"#FADB14";case e==="Введен":return"#FA8C16";case e==="В пачке":return"#F5222D";case e==="Просчитан":return"#EB2F96";case e==="Перемещается в пикинг/OA":return"#4532FF";case e==="В подборке":return"#1ABAFF";case e==="Подобран":return"#13C2C2";case e==="Ушел со склада":return"#52C41A";default:return"#D1D2DE"}},[e]);return r.jsxDEV(r.Fragment,{children:[e!=="-"&&r.jsxDEV(rr,{style:{boxShadow:`inset 0 0 0 var(--badge-size) ${s}`,flexShrink:0},minified:!0,size:"s"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/IncomingState/IncomingState.tsx",lineNumber:36,columnNumber:9},void 0),r.jsxDEV(Z,{size:"s",lineHeight:"s",children:e},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/IncomingState/IncomingState.tsx",lineNumber:45,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/IncomingState/IncomingState.tsx",lineNumber:34,columnNumber:5},void 0)},Pr=({orders:e,...s})=>{const{accessor:a,openedFilter:d}=s,f=l.useMemo(()=>e.map(u=>{let b;return a&&(a==="loadStartDate"||a==="creationDate"?b=B(u[a]):b=u[a]),{name:b||"(Пусто)",value:a?u[a].toString():""}}),[]);return r.jsxDEV(Je,{isOpen:d===a,checkboxes:f,...s},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/RowSetter/RowSetter.tsx",lineNumber:34,columnNumber:10},void 0)},we=e=>({orderId:e.OrderId,no:e.No,client:{label:e.Client.Name,id:e.Client.ClientId,code:e.Client.Code},clientId:e.Client.ClientId,clientLabel:e.Client.Name,clientCode:e.Client.Code,shipmentAddress:{label:e.ShipmentAddress.Name,id:e.ShipmentAddress.ClientId,code:e.ShipmentAddress.Code},warehouse:{label:e.Warehouse.Name,id:e.Warehouse.WarehouseId,code:e.Warehouse.Code,shippingWarehouse:0},driver:e.Driver,amNumber:e.CarNo,sealNumber:e.SealNo,loadEndDate:e.LoadingDateTimeEnd,loadStartDate:e.LoadingDateTimeStart,departureDate:e.DepartureActualDateTime,creationDate:je(e.DateCreation),shipmentDate:je(e.DateShipment),editable:e.Editable,status:e==null?void 0:e.Status,removal:e.Status==="Редактируется"||e.Status==="Введен"}),K=ge.injectEndpoints({endpoints:e=>({getOrderById:e.query({query:s=>({url:"",method:"GET",params:{command:U.GET_ORDER,json:JSON.stringify(s),emelClass:"API3PL"}}),transformResponse:({Order:s,Error:a})=>({Order:s?we(s):void 0,Error:a}),providesTags:["ORDER"]}),getOrders:e.query({query:s=>({url:"",method:"GET",params:{command:U.GET_ORDERS,json:JSON.stringify(s),emelClass:"API3PL"}}),transformResponse:({Order:s,Error:a})=>({Order:s==null?void 0:s.map(we),Error:a}),providesTags:["ORDER"]}),postOrder:e.mutation({query:s=>({url:"",method:"GET",params:{command:U.POST_ORDER,json:JSON.stringify(s),emelClass:"API3PL"}}),invalidatesTags:["ORDER"]}),putOrder:e.mutation({query:s=>({url:"",method:"POST",params:{command:U.PUT_ORDER,json:JSON.stringify(s),emelClass:"API3PL"}}),invalidatesTags:["ORDER"]}),deleteOrder:e.mutation({query:s=>({url:"",method:"POST",params:{command:U.DELETE_ORDER,json:JSON.stringify(s),emelClass:"API3PL"}}),invalidatesTags:["ORDER"]}),runOrder:e.mutation({query:s=>({url:"",method:"POST",params:{command:U.RUN_ORDER,json:JSON.stringify(s),emelClass:"API3PL"}}),invalidatesTags:["ORDER"]}),uploadOrder:e.mutation({query:s=>({url:"",method:"POST",params:{command:U.UPLOAD_ORDER,emelClass:"API3PL"},body:{TockenId:Me.getState().authUser.token,FileEncode:"utf8",...s}}),invalidatesTags:["ORDER"]})})}),vr=()=>{const e=He(),s=a=>e($e({columns:a}));return r.jsxDEV(sr,{onSetTableCols:s,cols:Object.values(q).filter(a=>a.title)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/ColumnsSetter/ColumnsSetter.tsx",lineNumber:16,columnNumber:5},void 0)},Or="_toolbar_9uf6u_1",xr="_buttons_group_9uf6u_8",hr="_buttons_9uf6u_8",ne={toolbar:Or,buttons_group:xr,buttons:hr},jr=({onResetFilters:e,startDate:s,endDate:a,search:d,setSearch:f,...u})=>{const b=W(),D=v=>b(De(v)),t=ce(v=>v.asnTableState),m=v=>{console.log(t)},p=[{label:"EXCEL",handleClick:m},{label:"PDF",handleClick:m}];return r.jsxDEV(T,{className:ne.toolbar,direction:"column",children:[r.jsxDEV(T,{className:ne.filter_group,children:[r.jsxDEV(ar,{startDate:s,endDate:a,...u},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:53,columnNumber:9},void 0),r.jsxDEV(T,{children:r.jsxDEV(Nr,{className:ne.search,placeholder:"Найти заказ по номеру",rightSide:Qe,value:d,type:"text",size:"s",onChange:f},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:55,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:54,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:52,columnNumber:7},void 0),r.jsxDEV(T,{className:ne.buttons_group,children:[r.jsxDEV(T,{className:ne.buttons,children:r.jsxDEV(L,{className:"button",label:"Новый заказ",size:"s",view:"secondary",iconLeft:ye,onClick:()=>D(z.ADD_ORDER_MODAL_ID)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:68,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:67,columnNumber:9},void 0),r.jsxDEV(T,{className:ne.buttons,children:[r.jsxDEV(L,{onClick:e,className:"button",label:"Очистить все фильтры",size:"s",view:"secondary"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:78,columnNumber:11},void 0),r.jsxDEV(vr,{},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:85,columnNumber:11},void 0),r.jsxDEV(L,{className:"button",label:"Импорт из файла",size:"s",view:"secondary",onClick:()=>D(z.IMPORT_ORDERS)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:86,columnNumber:11},void 0),r.jsxDEV(br,{buttonName:"Экспорт таблицы",btns:p},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:93,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:77,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:66,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTableHandles/OrdersTableHandles.tsx",lineNumber:51,columnNumber:5},void 0)},Tr="_table_1atsu_1",wr="_cell_1atsu_19",Er="_cellButton_1atsu_24",kr="_switchButton_1atsu_31",Cr="_noData_1atsu_35",Ur="_activeHeaderCell_1atsu_42",Lr="_pagination_1atsu_46",$={table:Tr,cell:wr,cellButton:Er,switchButton:kr,noData:Cr,activeHeaderCell:Ur,pagination:Lr},Sr=({onEditOrder:e})=>{const s=nr(),[a,d]=l.useState(null),f=W();ae();const{data:u,isLoading:b}=K.useGetOrdersQuery({DateTo:w(s.endDate)||"",DateFrom:w(s.startDate)||""}),D=l.useMemo(()=>{var i;return((i=u==null?void 0:u.Order)==null?void 0:i.filter(j=>j.no.toLowerCase().startsWith((a==null?void 0:a.toLowerCase())||"")))||[]},[a,u]),{columns:t}=ce(i=>i.orderTableState),m=i=>{f(Be({order:i})),f(De(z.DELETE_ORDER_MODAL_ID))},p=l.useCallback(({row:i})=>r.jsxDEV(Q,{style:{cursor:"pointer"},className:$.cell,onClick:()=>e(i),children:r.jsxDEV(Z,{size:"s",view:"brand",children:i.no?i.no:"-"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:73,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:69,columnNumber:7},void 0),[]),v=l.useCallback(({row:i})=>r.jsxDEV(Q,{className:$.cell,children:r.jsxDEV(Z,{size:"s",children:B(i.creationDate)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:84,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:83,columnNumber:7},void 0),[]),h=l.useCallback(({row:i})=>r.jsxDEV(Q,{className:$.cell,children:r.jsxDEV(Dr,{status:i.status?i.status:"-"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:93,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:92,columnNumber:7},void 0),[]),c=l.useCallback(({row:i})=>r.jsxDEV(Q,{className:$.cell,children:r.jsxDEV(Z,{size:"s",children:i.clientCode?i.clientCode:"-"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:102,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:101,columnNumber:7},void 0),[]),x=l.useCallback(({row:i})=>r.jsxDEV(Q,{className:$.cell,children:r.jsxDEV(Z,{size:"s",children:i.amNumber?i.amNumber:"-"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:111,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:110,columnNumber:7},void 0),[]),E=l.useCallback(({row:i})=>r.jsxDEV(Q,{className:$.cell,children:r.jsxDEV(Z,{size:"s",children:i.clientLabel?i.clientLabel:"-"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:120,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:119,columnNumber:7},void 0),[]),_=l.useCallback(({row:i})=>r.jsxDEV(Q,{className:$.cell,children:r.jsxDEV(Z,{size:"s",children:i.driver?i.driver:"-"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:129,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:128,columnNumber:7},void 0),[]),S=l.useCallback(({row:i})=>r.jsxDEV(Q,{className:$.cellButton,children:r.jsxDEV(L,{size:"s",view:"clear",iconRight:Se,onlyIcon:!0,onClick:()=>m(i),disabled:!i.removal,title:"Удалить"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:138,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:137,columnNumber:7},void 0),[]),J=l.useMemo(()=>[{...q.no,width:"1fr",minWidth:180,renderCell:p},{...q.creationDate,width:"1fr",minWidth:180,renderCell:v},{...q.status,width:"1fr",minWidth:180,renderCell:h},{...q.clientCode,width:"1fr",minWidth:180,renderCell:c},{...q.clientLabel,width:"1fr",minWidth:180,renderCell:E},{...q.amNumber,width:"1fr",minWidth:180,renderCell:x},{...q.driver,width:"1fr",minWidth:180,renderCell:_},{...q.removal,maxWidth:40,renderCell:S,renderHeaderCell:Y}].filter(({accessor:j})=>(t==null?void 0:t.some(M=>M.accessor===j))||q[j||""].isRequired),[t]),V=l.useCallback(i=>{f(Ge(i))},[]);return r.jsxDEV(Ze,{onSetRows:V,data:D,isLoading:b,paginationClass:$.pagination,children:({paginatedData:i,sortColumn:j,handleSort:M,...g})=>r.jsxDEV(r.Fragment,{children:[r.jsxDEV(jr,{...s,setSearch:d,search:a,onResetFilters:g.resetFilters},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:222,columnNumber:11},void 0),r.jsxDEV(T,{direction:"column",children:r.jsxDEV(Ue,{className:$.table,stickyHeader:!0,rows:i,headerZIndex:1,getRowKey:k=>k.orderId,columns:J.map(k=>({...k,renderHeaderCell:({tableRef:de,...A})=>r.jsxDEV(Y,{isActive:k.accessor===j,controlRight:k.title?[r.jsxDEV(Pr,{accessor:k.accessor||Object.values(q)[0].accessor,orders:D,...g},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:246,columnNumber:29},void 0)]:null,icon:k.title?r.jsxDEV(Le,{isActive:k.accessor===j},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:256,columnNumber:25},void 0):void 0,onClick:()=>M(k.accessor||"orderId"),...A},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:241,columnNumber:19},void 0)}))},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:229,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:228,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:221,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrdersTable/OrdersTable.tsx",lineNumber:215,columnNumber:5},void 0)},Ye=ge.injectEndpoints({endpoints:e=>({getShipAddresses:e.query({query:s=>({url:"",params:{command:U.GET_SHIPMENT_ADDRESS,emelClass:"API3PL",json:JSON.stringify(s)}}),transformResponse:({Client:s,Error:a})=>({ShipAddresses:s==null?void 0:s.map(or),Error:a}),providesTags:["ADDRESSES"]}),postShipmentAddress:e.mutation({query:s=>({url:"",method:"POST",params:{command:U.POST_SHIPMENT_ADDRESS,emelClass:"API3PL",json:JSON.stringify(s)}}),invalidatesTags:["ADDRESSES"]})})}),Vr=e=>({newName:e.label,newCode:e.code,newAddr:e.address,orgId:e.client.id}),Ar="_btn_s2uyy_1",yr="_header_s2uyy_11",Ee={btn:Ar,header:yr},Yr=()=>{const e=Oe(),{register:s,handleSubmit:a,reset:d}=e,[f,{data:u,isSuccess:b,isLoading:D}]=Ye.usePostShipmentAddressMutation(),{showToast:t}=ae(),m=W(),p=()=>m(Pe()),v=async c=>{try{const{result:x,Error:E}=await f(Vr(c)).unwrap();x&&(t("Новый адрес клиента успешно добавлен","success"),p(),d()),E&&t(E)}catch{}},{data:h}=Ve.useGetClientsQuery();return r.jsxDEV(xe,{...e,children:r.jsxDEV("form",{onSubmit:a(v),className:Ee.root,children:[r.jsxDEV(G,{rowGap:"s",children:[r.jsxDEV(se,{items:(h==null?void 0:h.Clients)||[],registered:s("client",{required:O.required}),required:!0,label:"Клиент",onChange:()=>{},size:"s",placeholder:"Клиент"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddAddress/Form/Form.tsx",lineNumber:49,columnNumber:11},void 0),r.jsxDEV(F,{registered:s("code",{required:O.required,setValueAs:c=>c.trim()}),required:!0,type:"text",placeholder:"Код нового адреса",label:"Код нового адреса",size:"s"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddAddress/Form/Form.tsx",lineNumber:58,columnNumber:11},void 0),r.jsxDEV(F,{registered:s("label",{required:O.required,setValueAs:c=>c.trim()}),required:!0,type:"text",placeholder:"Наименование адреса доставки",label:"Наименование",size:"s"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddAddress/Form/Form.tsx",lineNumber:69,columnNumber:11},void 0),r.jsxDEV(F,{registered:s("address",{required:O.required,setValueAs:c=>c.trim()}),required:!0,type:"text",placeholder:"Адрес доставки",label:"Адрес",size:"s"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddAddress/Form/Form.tsx",lineNumber:80,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddAddress/Form/Form.tsx",lineNumber:48,columnNumber:9},void 0),r.jsxDEV(L,{className:Ee.btn,label:"Сохранить",type:"submit",size:"s",loading:D},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddAddress/Form/Form.tsx",lineNumber:92,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddAddress/Form/Form.tsx",lineNumber:47,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddAddress/Form/Form.tsx",lineNumber:46,columnNumber:5},void 0)},Ir="_clientModal_19a81_1",Rr={clientModal:Ir},Fr=({})=>r.jsxDEV(ve,{modalId:z.ADD_NEW_CLIENT_ADDRESS,title:"Добавить новый адрес клиента",className:Rr.clientModal,children:r.jsxDEV(Yr,{},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddAddress/Modal/Modal.tsx",lineNumber:13,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddAddress/Modal/Modal.tsx",lineNumber:9,columnNumber:5},void 0),_r=e=>({id:e.OrderLineId,bbd:e.BBD,prd:e.PRD,count:e.Count,measurementUnit:{id:e.MU.MuId,label:e.MU.Name,extId:e.MU.ExtMuId,extLabel:e.MU.ExtName},lot:{id:e.Lot.LotId,label:e.Lot.LotNo,bbd:new Date().toString(),lifetime:0},good:{id:e.GoodItem.GoodItemId,article:e.GoodItem.Code,label:e.GoodItem.Name,brutto:0,height:0,length:0,netto:0,width:0},goodArticle:e.GoodItem.Code,goodLabel:e.GoodItem.Name,lotNo:e.Lot.LotNo,MU:e.MU.Name}),oe=ge.injectEndpoints({endpoints:e=>({getOrderLines:e.query({query:s=>({url:"",method:"POST",params:{command:U.GET_ORDER_LINES,json:JSON.stringify(s),emelClass:"API3PL"}}),transformResponse:({OrderLine:s,Error:a})=>({OrderLine:s==null?void 0:s.map(_r),Error:a}),providesTags:["ORDER_LINE"]}),postOrderLine:e.mutation({query:s=>({url:"",method:"POST",params:{command:U.POST_ORDER_LINE,json:JSON.stringify(s),emelClass:"API3PL"}}),invalidatesTags:["ORDER_LINE"]}),putOrderLine:e.mutation({query:s=>({url:"",method:"POST",params:{command:U.PUT_ORDER_LINE,json:JSON.stringify(s),emelClass:"API3PL"}}),invalidatesTags:["ORDER_LINE"]}),deleteOrderLine:e.mutation({query:s=>({url:"",method:"POST",params:{command:U.DELETE_ORDER_LINE,json:JSON.stringify(s),emelClass:"API3PL"}}),invalidatesTags:["ORDER_LINE"]})})}),Ie={INTRODUCED:50,EDITED:25},qr=e=>({Order:{No:e.orderNumber,LoadingDateTimeStart:w(new Date(e.loadStartDate))||"",LoadingDateTimeEnd:w(new Date(e.loadEndDate))||"",DepartureActualDateTime:w(new Date(e.departureDate))||"",DateShipment:w(new Date(e.shipmentDate))||"",DateCreation:w(new Date(e.creationDate))||"",ClientId:e.client.id,ShipmentAddressId:e.shipmentAddress.id,WarehouseId:e.warehouse.id,VendorId:e.client.id,SealNo:e.sealNumber,Driver:e.driver,ShipmentId:-1,CarNo:e.amNumber,TN_No:"",FindingTS:""}}),zr=(e,s)=>({Order:{OrderId:s,No:e.orderNumber,ClientId:e.client.id,ShipmentAddressId:e.shipmentAddress.id,WarehouseId:e.warehouse.id,VendorId:0,LoadingDateTimeStart:w(new Date(e.loadStartDate))||"",LoadingDateTimeEnd:w(new Date(e.loadEndDate))||"",DepartureActualDateTime:w(new Date(e.departureDate))||"",DateShipment:w(new Date(e.shipmentDate))||"",DateCreation:w(new Date(e.creationDate))||"",FindingTS:"",ShipmentId:-1,CarNo:e.amNumber,SealNo:e.sealNumber,TN_No:"",Driver:e.driver}}),Re=(e,s)=>({OrderLine:{OrderId:s,GoodItemId:e.good.id,LotId:e.lot.id,MuId:e.measurementUnit.id,BBD:w(e.bbd)||"",Count:parseInt(e.count)}}),Mr=(e,s)=>{var a;return{OrderLine:{OrderLineId:s,GoodItemId:e.good.id,LotId:(a=e.lot)==null?void 0:a.id,MuId:e.measurementUnit.id,BBD:w(e.bbd)||"",Count:parseInt(e.count)}}},Fe=({isEditMode:e,isLoading:s})=>{const{register:a,setValue:d,resetField:f,watch:u}=Ae();ae();const{data:b}=gr.useGetWarehousesQuery(),{data:D}=Ve.useGetClientsQuery(),[t,{data:m}]=Ye.useLazyGetShipAddressesQuery();return W(),l.useEffect(()=>{if(!e)return;const p=u("client");p!=null&&p.id&&t({ClientId:p==null?void 0:p.id})},[e]),r.jsxDEV(pr,{children:({step:p,steps:v})=>{var h;return r.jsxDEV(r.Fragment,{children:[r.jsxDEV(G,{cols:2,colGap:"s",className:p===v[0]?void 0:P.hidden,children:[r.jsxDEV(ee,{children:r.jsxDEV(G,{rowGap:"s",children:[r.jsxDEV(F,{registered:a("orderNumber",{required:O.required,setValueAs:c=>c.trim()}),readOnly:!e,required:e,type:"text",label:"Номер заказа",size:"s",disabled:s,placeholder:"Введите номер заказа"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:62,columnNumber:17},void 0),r.jsxDEV(G,{cols:2,yAlign:"top",gap:"s",children:[r.jsxDEV(I,{isReplacing:!e,label:"Клиент",path:"client.label",children:r.jsxDEV(se,{items:(D==null?void 0:D.Clients)||[],registered:a("client",{required:O.required}),required:e,label:"Клиент",onChange:c=>{d("clientCode",(c==null?void 0:c.code)||""),c!=null&&c.id&&t({ClientId:c==null?void 0:c.id}),f("shipmentAddress"),f("shipmentAddressCode")},size:"s",disabled:s,placeholder:"Выберите"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:80,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:76,columnNumber:19},void 0),r.jsxDEV(F,{registered:a("clientCode"),readOnly:!0,type:"text",label:"Клиент",size:"s",placeholder:"Клиент"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:96,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:75,columnNumber:17},void 0),r.jsxDEV(G,{cols:2,yAlign:"top",gap:"s",children:[r.jsxDEV(I,{isReplacing:!e,label:"Адрес доставки",path:"shipmentAddress.label",children:r.jsxDEV(se,{items:(m==null?void 0:m.ShipAddresses)||[],registered:a("shipmentAddress",{required:O.required}),required:e,label:"Адрес доставки",onChange:c=>d("shipmentAddressCode",(c==null?void 0:c.code)||""),size:"s",disabled:!((h=m==null?void 0:m.ShipAddresses)!=null&&h.length)||s,placeholder:"Выберите"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:128,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:124,columnNumber:19},void 0),r.jsxDEV(F,{registered:a("shipmentAddressCode"),readOnly:!0,type:"text",placeholder:"Адрес",label:"Код",size:"s"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:139,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:123,columnNumber:17},void 0),r.jsxDEV(G,{cols:2,yAlign:"top",gap:"s",children:[r.jsxDEV(I,{isReplacing:!e,label:"Склад отгрузки",path:"warehouse.label",children:r.jsxDEV(se,{items:(b==null?void 0:b.Warehouse)||[],registered:a("warehouse",{required:O.required}),required:e,label:"Склад отгрузки",onChange:c=>d("warehouseCode",(c==null?void 0:c.code)||""),size:"s",disabled:s,placeholder:"Выберите"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:171,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:167,columnNumber:19},void 0),r.jsxDEV(F,{registered:a("warehouseCode"),readOnly:!0,type:"text",placeholder:"Склад отгрузки",label:"Код",size:"s"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:182,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:166,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:61,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:60,columnNumber:13},void 0),r.jsxDEV(ee,{children:r.jsxDEV(G,{rowGap:"s",children:[r.jsxDEV(ee,{children:r.jsxDEV(F,{registered:a("driver",{required:O.required,setValueAs:c=>c.trim()}),readOnly:!e,required:e,type:"text",label:"Водитель",size:"s",disabled:s,placeholder:"Водитель"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:196,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:195,columnNumber:17},void 0),r.jsxDEV(ee,{children:r.jsxDEV(F,{registered:a("amNumber"),readOnly:!e,type:"text",label:"Номер а/м",size:"s",disabled:s,placeholder:"Номер а/м"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:211,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:210,columnNumber:17},void 0),r.jsxDEV(ee,{children:r.jsxDEV(F,{registered:a("sealNumber",{required:O.required}),readOnly:!e,required:e,type:"text",label:"Номер пломбы",size:"s",disabled:s,placeholder:"Номер пломбы"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:222,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:221,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:194,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:193,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:59,columnNumber:11},void 0),r.jsxDEV(G,{cols:2,colGap:"s",className:p===v[1]?void 0:P.hidden,children:[r.jsxDEV(ee,{children:r.jsxDEV(G,{rowGap:"s",children:[r.jsxDEV(I,{isReplacing:!e,path:"creationDate",label:"Создан",valueModifier:B,children:r.jsxDEV(re,{registered:a("creationDate",{required:O.required,valueAsDate:!0}),rightSide:me,size:"s",label:"Создан",disabled:!0,format:"dd/MM/yyyy",placeholder:"дд/мм/гггг"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:244,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:239,columnNumber:17},void 0),r.jsxDEV(I,{isReplacing:!e,path:"loadStartDate",label:"Начало загрузки",valueModifier:B,children:r.jsxDEV(re,{registered:a("loadStartDate",{required:O.required,valueAsDate:!0}),rightSide:me,size:"s",label:"Начало загрузки",required:e,disabled:s,format:"dd/MM/yyyy",placeholder:"дд/мм/гггг"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:262,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:257,columnNumber:17},void 0),r.jsxDEV(I,{isReplacing:!e,path:"departureDate",label:"Убытие машины",valueModifier:B,children:r.jsxDEV(re,{registered:a("departureDate",{required:O.required,valueAsDate:!0}),rightSide:me,size:"s",label:"Убытие машины",required:e,disabled:s,format:"dd/MM/yyyy",placeholder:"дд/мм/гггг"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:281,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:276,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:238,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:237,columnNumber:13},void 0),r.jsxDEV(ee,{children:r.jsxDEV(G,{rowGap:"s",children:[r.jsxDEV(I,{isReplacing:!e,path:"shipmentDate",label:"Дата отгрузки",valueModifier:B,children:r.jsxDEV(re,{registered:a("shipmentDate",{required:O.required,valueAsDate:!0}),rightSide:me,size:"s",label:"Дата отгрузки",required:e,disabled:s,format:"dd/MM/yyyy",placeholder:"дд/мм/гггг"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:304,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:299,columnNumber:17},void 0),r.jsxDEV(I,{isReplacing:!e,path:"loadEndDate",label:"Окончание загрузки",valueModifier:B,children:r.jsxDEV(re,{registered:a("loadEndDate",{required:O.required,valueAsDate:!0}),rightSide:me,size:"s",label:"Окончание загрузки",required:e,disabled:s,format:"dd/MM/yyyy",placeholder:"дд/мм/гггг"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:323,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:318,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:298,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:297,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:236,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:58,columnNumber:9},void 0)}},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Tabs/Tabs.tsx",lineNumber:56,columnNumber:5},void 0)},Hr=e=>({id:e.LotId,label:e.LotNo,bbd:e.BBD,lifetime:e.LifeTime}),$r=ge.injectEndpoints({endpoints:e=>({getLots:e.query({query:s=>({url:"",method:"GET",params:{command:U.GET_LOTS,emelClass:"API3PL",json:JSON.stringify(s)}}),transformResponse:({Lots:s,Error:a})=>({Lots:s==null?void 0:s.map(Hr),Error:a}),providesTags:["LOT"]})})}),Gr=e=>{const[s,a]=l.useState(!1),[d,f]=l.useState([]),[u,b]=l.useState(!0),[D]=$r.useLazyGetLotsQuery(),t=W();l.useEffect(()=>{b(!e)},[e]);const m=l.useCallback(async p=>{if(p)try{a(!0);const{Lots:v=[],Error:h}=await D({GoodItemId:e.id}).unwrap();h&&t(Ce({message:h})),f(v)}catch{}finally{a(!1)}},[e]);return[d,s,u,m]},_e=({isEditMode:e,orderId:s,onCancelEditMode:a,isLoading:d})=>{const[f,u]=l.useState([]),[b,D]=l.useState([]),{register:t,setValue:m,unregister:p,resetField:v,watch:h}=Ae(),[c]=oe.useLazyGetOrderLinesQuery(),[x]=dr.useLazyGetMeasurementUnitsQuery(),{data:E}=Ke.useGetGoodsQuery(),S=!!ce(n=>n.modalState).openedIds.find(n=>n===z.EDIT_ORDER_MODAL_ID),J=W(),V=l.useCallback(n=>{p("orderLines"),n.forEach(o=>{const{id:N}=o;m(`orderLines[${N}].bbd`,Te(o.bbd)),m(`orderLines[${N}].prd`,Te(o.prd)),m(`orderLines[${N}].count`,o.count),m(`orderLines[${N}].good`,o.good),m(`orderLines[${N}].goodArticle`,o.good.article),m(`orderLines[${N}].measurementUnit`,o.measurementUnit),m(`orderLines[${N}].lot`,o.lot)})},[S]),i=l.useCallback(async()=>{if(s)try{const{OrderLine:n,Error:o}=await c({OrderId:s}).unwrap();o&&J(Ce({message:o})),n&&(u(n),V(n))}catch{}},[S]);l.useEffect(()=>{S&&i()},[S]);const j=()=>u([...f,{id:Date.now(),status:"new"}]),M=n=>{u(o=>o.filter(({id:N})=>N!==n)),p(`orderLines[${n}]`)},g=(n,o)=>{u(N=>N.map(C=>C.id===n?{...C,...o}:C))},k=l.useCallback(n=>r.jsxDEV(I,{isReplacing:!e,path:`orderLines[${n.row.id}].good.label`,rootClassName:P.lineCell,children:r.jsxDEV(se,{items:(E==null?void 0:E.Goods)||[],registered:t(`orderLines[${n.row.id}].good`,{required:O.required}),required:!0,placeholder:"Выберите",size:"s",virtualScroll:!0,disabled:d,onChange:async o=>{if(m(`orderLines[${n.row.id}].goodArticle`,o==null?void 0:o.article),g(n.row.id,{goodLabel:o==null?void 0:o.label,goodArticle:o==null?void 0:o.article}),v(`orderLines[${n.row.id}].measurementUnit`),v(`orderLines[${n.row.id}].lot`),(o==null?void 0:o.id)!==void 0){const{data:N}=await x({GoodItemId:o==null?void 0:o.id});N!=null&&N.MU&&(m(`orderLines[${n.row.id}].measurementUnit`,N==null?void 0:N.MU[0]),g(n.row.id,{MU:N==null?void 0:N.MU[0].label}))}}},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:116,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:112,columnNumber:7},void 0),[E,e,d]),de=l.useCallback(n=>r.jsxDEV(F,{registered:t(`orderLines[${n.row.id}].goodArticle`),readOnly:!0,required:e,className:P.lineCell,size:"s",type:"textarea",disabled:d},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:152,columnNumber:7},void 0),[e,d]),A=l.useCallback(n=>{const o=h(`orderLines[${n.row.id}].good`),[N,C,be,le]=tr(o);return r.jsxDEV(I,{isReplacing:!e,path:`orderLines[${n.row.id}].measurementUnit.label`,rootClassName:P.lineCell,children:r.jsxDEV(se,{registered:t(`orderLines[${n.row.id}].measurementUnit`,{required:O.required}),required:!0,placeholder:"Выберите",size:"s",onChange:X=>g(n.row.id,{MU:X==null?void 0:X.label}),virtualScroll:!0,isLoading:C,items:N,disabled:be||d,onDropdownOpen:le},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:175,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:171,columnNumber:9},void 0)},[e,d]),pe=l.useCallback(n=>r.jsxDEV(F,{registered:t(`orderLines[${n.row.id}].count`,{required:O.required,onChange:o=>g(n.row.id,{count:o.target.value})}),readOnly:!e,required:e,size:"s",className:P.lineCell,type:"textarea",disabled:d},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:197,columnNumber:7},void 0),[e,d]),Ne=l.useCallback(n=>r.jsxDEV(I,{isReplacing:!e,path:`orderLines[${n.row.id}].bbd`,rootClassName:P.lineCell,valueModifier:B,children:r.jsxDEV(re,{registered:t(`orderLines[${n.row.id}].bbd`,{required:O.required}),required:e,size:"s",format:"dd/MM/yyyy",placeholder:"дд/мм/гггг",disabled:d,onChange:o=>g(n.row.id,{bbd:o==null?void 0:o.toString()})},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:220,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:215,columnNumber:7},void 0),[e,d]),fe=l.useCallback(n=>r.jsxDEV(I,{isReplacing:!e,path:`orderLines[${n.row.id}].prd`,rootClassName:P.lineCell,valueModifier:B,children:r.jsxDEV(re,{registered:t(`orderLines[${n.row.id}].prd`,{required:O.required}),required:!0,size:"s",format:"dd/MM/yyyy",placeholder:"дд/мм/гггг",disabled:d,onChange:o=>g(n.row.id,{prd:o==null?void 0:o.toString()})},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:243,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:238,columnNumber:7},void 0),[e,d]),ue=l.useCallback(n=>{const o=h(`orderLines[${n.row.id}].good`),[N,C,be,le]=Gr(o);return r.jsxDEV(I,{isReplacing:!e,path:`orderLines[${n.row.id}].lot.label`,rootClassName:P.lineCell,children:r.jsxDEV(se,{registered:t(`orderLines[${n.row.id}].lot`,{required:O.required}),required:!0,placeholder:"Выберите",size:"s",onChange:X=>g(n.row.id,{lotNo:X==null?void 0:X.label}),virtualScroll:!0,isLoading:C,items:N,disabled:be||d,onDropdownOpen:le},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:269,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:265,columnNumber:9},void 0)},[e,d]),y=l.useCallback(n=>r.jsxDEV("div",{className:P.lineCell,children:r.jsxDEV(L,{size:"s",view:"clear",onClick:()=>{M(n.row.id),D(b.filter(({id:o})=>o!==n.row.id))},iconLeft:Se,onlyIcon:!0,disabled:!e||d},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:292,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:291,columnNumber:7},void 0),[M,e,d]),te=[{title:"",accessor:"select",renderCell:l.useCallback(n=>r.jsxDEV("div",{className:P.lineCell,children:r.jsxDEV(he,{size:"s",checked:!!b.find(o=>n.row.id===o.id),view:"primary",onChange:()=>ie(n.row),disabled:!e||d},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:311,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:310,columnNumber:7},void 0),[b,e,d]),maxWidth:40,renderHeaderCell:Y},{title:"Наименование",accessor:"goodLabel",renderCell:k,width:"auto",renderHeaderCell:Y},{title:"Артикул",accessor:"goodArticle",renderCell:de,maxWidth:120,renderHeaderCell:Y},{title:"Кол-во",accessor:"count",renderCell:pe,maxWidth:120,renderHeaderCell:Y},{title:"ЕИ",accessor:"MU",renderCell:A,maxWidth:120,renderHeaderCell:Y},{title:"Партия",accessor:"lotNo",renderCell:ue,maxWidth:150,renderHeaderCell:Y},{title:"BBD",accessor:"bbd",renderCell:Ne,maxWidth:120,renderHeaderCell:Y},{title:"PRD",accessor:"prd",renderCell:fe,maxWidth:120,renderHeaderCell:Y},{title:"",accessor:"actions",maxWidth:40,renderCell:y,renderHeaderCell:Y}],ie=n=>{const o=b.find(({id:N})=>N===n.id);D(o?b.filter(({id:N})=>N!==n.id):[...b,n])},R=()=>{b.forEach(n=>{M(n.id)}),D([])},qe=()=>{a==null||a(),i()},ze=()=>{b.length===f.length?D([]):D(f)};return r.jsxDEV(T,{direction:"column",className:P.tableWrapper,children:[e&&r.jsxDEV(T,{className:P.handles,children:[r.jsxDEV(L,{onClick:j,size:"s",label:"Новая строка",view:"secondary",iconLeft:ye,disabled:!e||d},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:421,columnNumber:11},void 0),a&&r.jsxDEV(L,{onClick:qe,disabled:!e||d,label:"Отменить изменения",type:"button",size:"s",view:"secondary"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:430,columnNumber:13},void 0),r.jsxDEV(L,{size:"s",label:"Удалить выбранные",view:"secondary",disabled:!e||!b.length||d,onClick:R},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:439,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:420,columnNumber:9},void 0),r.jsxDEV(Xe,{data:f,children:({sortedData:n,handleSort:o,sortColumn:N})=>r.jsxDEV(Ue,{className:P.orderLineTable,rows:n,headerZIndex:0,columns:te.map(C=>({...C,renderHeaderCell:({tableRef:be,...le})=>C.accessor==="select"?r.jsxDEV(Y,{onClick:ze,className:P.checkboxHeader,controlLeft:r.jsxDEV(he,{size:"s",checked:!!b.length&&b.length===n.length,view:"primary",disabled:d},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:463,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:459,columnNumber:21},void 0):r.jsxDEV(Y,{isActive:C.accessor===N,icon:C.title?r.jsxDEV(Le,{isActive:N===C.accessor},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:482,columnNumber:25},void 0):void 0,onClick:()=>o(C.accessor||"good"),...le},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:478,columnNumber:19},void 0)}))},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:450,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:448,columnNumber:7},void 0),f.length===0&&r.jsxDEV(Z,{className:P.emptyTableText,align:"center",size:"s",children:"Нажмите “+ Новая строка” для добавления груза"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:494,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/OrderLineTable/OrderLineTable.tsx",lineNumber:418,columnNumber:5},void 0)},Br=()=>{const[e,s]=l.useState({isActive:!1}),{showToast:a}=ae(),d=W(),f=()=>d(Pe()),u=Oe(),{handleSubmit:b,reset:D,setValue:t,clearErrors:m}=u;l.useEffect(()=>{const x=w(new Date);x&&t("creationDate",x)},[]);const[p]=K.usePostOrderMutation(),[v]=oe.usePostOrderLineMutation(),[h]=K.useRunOrderMutation(),c=async(x,E)=>{try{s({isActive:!0,isIntroduced:!!E});const _=[],{OrderId:S,Error:J}=await p(qr(x)).unwrap();if(J&&_.push(J),S){for(let V in x.orderLines){const i=x.orderLines[V],{Error:j}=await v(Re(i,S)).unwrap();j&&_.push(j)}if(E){const{Error:V}=await h({OrderId:S,StatusCode:Ie.INTRODUCED}).unwrap();V&&_.push(V)}}_.length?_.forEach(V=>a(V)):(D(),f())}catch{}finally{s({isActive:!1})}};return r.jsxDEV(xe,{...u,children:r.jsxDEV("form",{onSubmit:b(x=>c(x,!0)),className:P.form,children:[r.jsxDEV(T,{direction:"column",className:P.innerFormWrapper,children:[r.jsxDEV(Fe,{isLoading:e.isActive,isEditMode:!0},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddOrder/Form/Form.tsx",lineNumber:85,columnNumber:11},void 0),r.jsxDEV(_e,{isLoading:e.isActive,isEditMode:!0},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddOrder/Form/Form.tsx",lineNumber:86,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddOrder/Form/Form.tsx",lineNumber:84,columnNumber:9},void 0),r.jsxDEV(T,{className:P.handles,children:[r.jsxDEV(L,{onClick:b(x=>c(x)),label:"Сохранить",view:"clear",size:"s",loading:e.isActive&&!e.isIntroduced,disabled:e.isActive&&e.isIntroduced},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddOrder/Form/Form.tsx",lineNumber:89,columnNumber:11},void 0),r.jsxDEV(L,{type:"submit",label:"Завершить ввод",size:"s",loading:e.isActive&&e.isIntroduced,disabled:e.isActive&&!e.isIntroduced},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddOrder/Form/Form.tsx",lineNumber:97,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddOrder/Form/Form.tsx",lineNumber:88,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddOrder/Form/Form.tsx",lineNumber:83,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddOrder/Form/Form.tsx",lineNumber:82,columnNumber:5},void 0)},Wr=()=>r.jsxDEV(ve,{modalId:z.ADD_ORDER_MODAL_ID,title:"Новый заказ (статус - Редактируется)",children:r.jsxDEV(Br,{},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddOrder/AddOrder.tsx",lineNumber:9,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/AddOrder/AddOrder.tsx",lineNumber:8,columnNumber:5},void 0),Jr=({orderId:e})=>{var M;const[s,a]=l.useState({isActive:!1}),[d,f]=l.useState(!1),u=()=>f(!d),b=Oe(),{handleSubmit:D,setValue:t,clearErrors:m}=b,{data:p,refetch:v}=K.useGetOrderByIdQuery({OrderId:e}),[h]=K.usePutOrderMutation(),[c]=oe.useLazyGetOrderLinesQuery(),[x]=oe.usePutOrderLineMutation(),[E]=oe.usePostOrderLineMutation(),[_]=oe.useDeleteOrderLineMutation(),[S]=K.useRunOrderMutation(),{showToast:J}=ae(),V=l.useCallback(()=>{if(p!=null&&p.Order){const g=p.Order;t("orderNumber",g.no),t("client",g.client),t("shipmentAddress",g.shipmentAddress),t("warehouse",g.warehouse),t("driver",g.driver),t("amNumber",g.amNumber),t("sealNumber",g.sealNumber),t("warehouse",g.warehouse),t("loadEndDate",g.loadEndDate),t("loadStartDate",g.loadStartDate),t("shipmentDate",g.shipmentDate),t("creationDate",g.creationDate),t("departureDate",g.departureDate),t("warehouseCode",g.warehouse.code),t("shipmentAddressCode",g.shipmentAddress.code),t("clientCode",g.clientCode)}},[p]);l.useEffect(()=>{V()},[p]);const i=()=>{m(),V(),v(),u()},j=async(g,k)=>{var de;try{a({isActive:!0,isIntroduced:!!k});const A=[],{INTRODUCED:pe,EDITED:Ne}=Ie;if(((de=p==null?void 0:p.Order)==null?void 0:de.status)==="Введен"){const{Error:y}=await S({OrderId:e,StatusCode:Ne}).unwrap();y&&A.push(y)}const{result:fe,Error:ue}=await h(zr(g,e)).unwrap();if(ue&&A.push(ue),fe=="Ok"){const{OrderLine:y}=await c({OrderId:e},!0).unwrap();for(let H in g.orderLines){const te=g.orderLines[H];if(y==null?void 0:y.find(R=>R.id===parseInt(H))){const{Error:R}=await x(Mr(te,parseInt(H))).unwrap();R&&A.push(R)}else{const{Error:R}=await E(Re(te,e)).unwrap();R&&A.push(R)}}if(y==null||y.forEach(async H=>{var ie;if(!((ie=g.orderLines)==null?void 0:ie[H.id])){const{Error:R}=await _({OrderLineId:H.id}).unwrap();R&&A.push(R)}}),k){const{Error:H}=await S({OrderId:e,StatusCode:pe}).unwrap();H&&A.push(H)}}A.length?A.forEach(y=>J(y)):i()}catch{}finally{a({isActive:!1})}};return r.jsxDEV(xe,{...b,children:r.jsxDEV("form",{onSubmit:D(g=>j(g,!0)),className:P.form,children:[r.jsxDEV(T,{direction:"column",className:P.innerFormWrapper,children:[r.jsxDEV(Fe,{isEditMode:d,isLoading:s.isActive},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/Form/Form.tsx",lineNumber:154,columnNumber:11},void 0),r.jsxDEV(_e,{onCancelEditMode:i,orderId:e,isEditMode:d,isLoading:s.isActive},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/Form/Form.tsx",lineNumber:155,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/Form/Form.tsx",lineNumber:153,columnNumber:9},void 0),r.jsxDEV(T,{className:P.handles,children:[((M=p==null?void 0:p.Order)==null?void 0:M.removal)&&!d&&r.jsxDEV(L,{onClick:u,label:"Редактировать",type:"button",size:"s"},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/Form/Form.tsx",lineNumber:164,columnNumber:13},void 0),!!d&&r.jsxDEV(r.Fragment,{children:[r.jsxDEV(L,{label:"Сохранить",size:"s",view:"clear",onClick:D(g=>j(g)),loading:s.isActive&&!s.isIntroduced,disabled:s.isActive&&s.isIntroduced},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/Form/Form.tsx",lineNumber:168,columnNumber:15},void 0),r.jsxDEV(L,{label:"Завершить ввод",size:"s",type:"submit",loading:s.isActive&&s.isIntroduced,disabled:s.isActive&&!s.isIntroduced},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/Form/Form.tsx",lineNumber:176,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/Form/Form.tsx",lineNumber:167,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/Form/Form.tsx",lineNumber:162,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/Form/Form.tsx",lineNumber:152,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/Form/Form.tsx",lineNumber:151,columnNumber:5},void 0)},Qr=({order:e})=>r.jsxDEV(ve,{modalId:z.EDIT_ORDER_MODAL_ID,title:`Заказ №${e==null?void 0:e.no} (Статус - ${e==null?void 0:e.status})`,children:e&&r.jsxDEV(Jr,{orderId:e.orderId},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/EditOrder.tsx",lineNumber:15,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/EditOrder/EditOrder.tsx",lineNumber:12,columnNumber:5},void 0),Zr=()=>{const s=!!ce(m=>m.modalState).openedIds.find(m=>m===z.DELETE_ORDER_MODAL_ID),{order:a}=ce(m=>m.orderDataState),d=W(),f=()=>d(Pe()),{showToast:u}=ae(),[b,{isLoading:D}]=K.useDeleteOrderMutation(),t=async()=>{if(a)try{const{Error:m}=await b({OrderId:a.orderId}).unwrap();m?u(m):f()}catch{u(We.errorRequest)}};return r.jsxDEV(ir,{confirmBtnLabel:"Удалить",closeModal:f,onClick:t,title:"Удаление заказа",text:`Вы действительно хотите удалить заказ ${a==null?void 0:a.no}?`,isOpen:s,isLoading:D},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/DeleteOrder/DeleteOrder.tsx",lineNumber:35,columnNumber:5},void 0)},Kr=()=>{const[e,{isLoading:s}]=K.useUploadOrderMutation(),{showToast:a}=ae(),d=async f=>{try{const u=f[0],b=await mr(u);if(typeof b=="string"){const{result:D,Error:t}=await e({FileName:u.name,FileBase64:b}).unwrap();D!=null&&a(D,"success"),t&&a(t)}}catch{}};return r.jsxDEV(lr,{modalId:z.IMPORT_ORDERS,onUpload:d,title:"Загрузить заказы файлом",isLoading:s},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/ImportOrders/ImportOrders.tsx",lineNumber:30,columnNumber:5},void 0)},Xr=({order:e})=>r.jsxDEV(r.Fragment,{children:[r.jsxDEV(Wr,{},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Modals/Modals.tsx",lineNumber:19,columnNumber:7},void 0),r.jsxDEV(Qr,{order:e},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Modals/Modals.tsx",lineNumber:20,columnNumber:7},void 0),r.jsxDEV(Zr,{},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Modals/Modals.tsx",lineNumber:21,columnNumber:7},void 0),r.jsxDEV(er,{},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Modals/Modals.tsx",lineNumber:22,columnNumber:7},void 0),r.jsxDEV(Fr,{},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Modals/Modals.tsx",lineNumber:23,columnNumber:7},void 0),r.jsxDEV(cr,{title:"Добавить нового клиента",modalId:z.ADD_NEW_CLIENT,clientType:ur.client},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Modals/Modals.tsx",lineNumber:24,columnNumber:7},void 0),r.jsxDEV(Kr,{},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Modals/Modals.tsx",lineNumber:29,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/components/Modals/Modals.tsx",lineNumber:18,columnNumber:5},void 0),es="_container_50a2e_1",rs="_main_50a2e_6",ss="_noData_50a2e_10",as="_loader_50a2e_16",ns="_cellButton_50a2e_21",ke={container:es,main:rs,noData:ss,loader:as,cellButton:ns},gs=()=>{const[e,s]=l.useState(null),a=W(),d=u=>a(De(u)),f=u=>{d(z.EDIT_ORDER_MODAL_ID),s(u)};return r.jsxDEV(fr,{children:r.jsxDEV(T,{className:ke.container,direction:"column",children:r.jsxDEV(T,{className:ke.main,direction:"column",children:[r.jsxDEV(Sr,{onEditOrder:f},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/OrderPage.tsx",lineNumber:28,columnNumber:11},void 0),r.jsxDEV(Xr,{order:e},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/OrderPage.tsx",lineNumber:29,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/OrderPage.tsx",lineNumber:27,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/OrderPage.tsx",lineNumber:26,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/anatolijcudnov/Desktop/Programming/YP/dev/2004-web/src/pages/OrderPage/OrderPage.tsx",lineNumber:25,columnNumber:5},void 0)};export{gs as default};
