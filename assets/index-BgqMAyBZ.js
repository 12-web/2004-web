import{b,a as j,u as N,j as e,N as E,c as L,d as v,r as c,s as y}from"./index-CrQfVV6e.js";import{B as T}from"./MixSpace-BH-mNI3_.js";import{T as u}from"./TextField-nM0gg3v-.js";import{L as d}from"./Layout-rNpELU_B.js";const A=b.injectEndpoints({endpoints:n=>({login:n.mutation({query:({user:a,password:i})=>({url:"",method:"POST",mode:"cors",params:{command:j.CHECK_LOGIN,json:JSON.stringify({user:a,password:i}),emelClass:"API3PL"}})})})}),C="_logo_nsuxo_1",P="_container_nsuxo_5",S="_form_nsuxo_15",w="_field_nsuxo_26",t={logo:C,container:P,form:S,field:w},{useLoginMutation:k}=A,p="/asn",I=()=>{const{token:n}=N(s=>s.authUser);if(n)return e.jsx(E,{to:p});const a=L(),i=v(),[m,{data:o,isLoading:f}]=k(),[r,g]=c.useState(null),[l,x]=c.useState(null),_=!r||!l,h=async()=>{try{const{TockenId:s}=await m({user:r,password:l}).unwrap();s&&(a(y(s)),i(p))}catch(s){console.error("Failed to login:",s)}};return e.jsx(d,{className:t.container,children:e.jsxs(d,{className:t.form,direction:"column",children:[e.jsx(u,{className:t.field,label:"Логин",placeholder:"Логин",labelPosition:"top",value:r,onChange:s=>g(s)}),e.jsx(u,{className:t.field,label:"Пароль",placeholder:"Пароль",labelPosition:"top",type:"password",value:l,status:o!=null&&o.Error?"alert":void 0,caption:(o==null?void 0:o.Error)||void 0,onChange:s=>x(s)}),e.jsx(T,{label:"Войти",disabled:_,loading:f,onClick:h})]})})};export{I as default};
